<!DOCTYPE HTML>
<html>
<!--
Copyright (c) 2013 The Chromium Authors. All rights reserved.
Use of this source code is governed by a BSD-style license that can be
found in the LICENSE file.
-->
<script src="/src/base.js"></script>
</head>
<body>
<script>
  base.require('base.unittest');
  base.require('ui.dom_helpers');
</script>
<script>
  'use strict';

  function testCheckbox() {
    var target = {foo: false};
    this.addHTMLOutput(undefined, ui.createCheckBox(target, 'foo', 'Foo'));
  }

  function testSelectorSettingsAlreaySet() {
    base.Settings.set('myScale', 0.25);

    var target = {
      scale: 314
    };
    var sel = ui.createSelector(
      target, 'scale',
      'myScale', 0.375,
      [{label: '6.25%', value: 0.0625},
       {label: '12.5%', value: 0.125},
       {label: '25%', value: 0.25},
       {label: '37.5%', value: 0.375},
       {label: '50%', value: 0.5},
       {label: '75%', value: 0.75},
       {label: '100%', value: 1},
       {label: '200%', value: 2}
      ]);
    assertEquals(0.25, target.scale);
    assertEquals(2, sel.selectedIndex);
  }

  function testSelectorSettingsDefault() {
    var target = {
      scale: 314
    };
    var sel = ui.createSelector(
      target, 'scale',
      'myScale', 0.375,
      [{label: '6.25%', value: 0.0625},
       {label: '12.5%', value: 0.125},
       {label: '25%', value: 0.25},
       {label: '37.5%', value: 0.375},
       {label: '50%', value: 0.5},
       {label: '75%', value: 0.75},
       {label: '100%', value: 1},
       {label: '200%', value: 2}
      ]);
    assertEquals(0.375, target.scale);
    assertEquals(3, sel.selectedIndex);
  }

  function testSelectorSettingsChanged() {
    var target = {
      scale: 314
    };
    var sel = ui.createSelector(
      target, 'scale',
      'myScale', 0.375,
      [{label: '6.25%', value: 0.0625},
       {label: '12.5%', value: 0.125},
       {label: '25%', value: 0.25},
       {label: '37.5%', value: 0.375},
       {label: '50%', value: 0.5},
       {label: '75%', value: 0.75},
       {label: '100%', value: 1},
       {label: '200%', value: 2}
      ]);
    assertEquals(0.375, sel.selectedValue);
    sel.selectedValue = 0.75;
    assertEquals(0.75, target.scale);
    assertEquals(0.75, sel.selectedValue);
    assertEquals(0.75, base.Settings.get('myScale', undefined));
  }
</script>
</body>
</html>
